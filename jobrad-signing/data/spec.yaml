openapi: 3.0.0
info:
  version: 2.0.0
  title: SourceAPI
  x-audience: private-internal
  contact:
    name: Swagger API Team
    email: apiteam@swagger.io
    url: http://swagger.io
  license:
    name: Apache 2.0
    url: https://mettler.org/licenses/LICENSE-2.0.html
  description: >
    <img
    src="https://cdn.ppolyzos.com/wp-content/uploads/2017/10/jwt-support-swagger-aspnet-core.png"
    style="float:right;width:200px"/>


    ### API-Topics


    - la descrizione dei dati, eg. *Cartografia catastale in scala 1:2000*

    - i cs ontatti dell'ente che li pubblica, eg. *Agenzia delle Entrate


    `curl "https://localhost:3000?limit=5" -u "$user:password"`
servers:
  - url: http://localhost:3000
tags:
  - name: Health
    description: Everything about my Health
    externalDocs:
      description: Find out more
      url: http://assona.io
paths:
  /status:
    get:
      summary: API-Health-Check
      tags:
        - Health
      operationId: getStatus
      x-controller-name: StatusController
      x-operation-name: getStatus
      description: >
        ## Avaddilability, Latency, API-Status
          * Debug interface for Salespartner integration
          * To be Integrated with Monitoring-Solutions No rate-limiting!
        ## Request-Debugging
          * Request-Body will be echo'ed after successful validation <i>(if any)</i>
          * Meaningful validation errors in JSON-Format
      parameters:
        - description: How many items to return at one time (max 100)
          in: query
          name: limit
          schema:
            format: int32
            type: integer
        - description: Sorting order
          in: query
          name: sort
          schema:
            example: +name
            type: string
        - description: The zero-ary offset index into the results
          in: query
          name: offset
          schema:
            default: 0
            format: int32
            type: integer
        - description: Search query term
          in: query
          name: q
          schema:
            type: string
        - description: >
            The RFC7232 ETag header field in a response provides the current
            entity-

            tag for the selected resource. An entity-tag is an opaque identifier for

            different versions of a resource over time, regardless whether multiple

            versions are valid at the same time. An entity-tag consists of an opaque

            quoted string, possibly prefixed by a weakness indicator.
          example: W/"xy", "5", "7da7a728-f910-11e6-942a-68f728c1ba70"
          in: header
          name: Etag
          required: false
          schema:
            type: string
        - description: testme
          in: query
          name: citizen
          schema:
            externalDocs:
              url: https://w3id.org/italia/onto/CPV
            properties:
              family_name:
                type: string
              given_name:
                type: string
              tax_code:
                description: Il codice fiscale.
                example: RSSMRA75L01H501A
                externalDocs:
                  url: https://w3id.org/italia/onto/CPV/taxCode
                pattern: /^(?:(?:[B-DF-HJ-NP-TV-Z]|[AEIOU])[AEIOU][AEIOUX]|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}[\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[1256LMRS][\dLMNP-V])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM])(?:[A-MZ][1-9MNP-V][\dLMNP-V]{2}|[A-M][0L](?:[1-9MNP-V][\dLMNP-V]|[0L][1-9MNP-V]))[A-Z]$/i
                type: string
        - description: >
            The RFC7232 If-None-Match header field in a request requires the
            server

            to only operate on the resource if it does not match any of the provided

            entity-tags. If the provided entity-tag is `*`, it is required that the

            resource does not exist at all.
          example: '"7da7a728-f910-11e6-942a-68f728c1ba70", *'
          in: header
          name: If-None-Match
          required: false
          schema:
            type: string
        - description: >
            The RFC7232 If-Match header field in a request requires the server
            to

            only operate on the resource that matches at least one of the provided

            entity-tags. This allows clients express a precondition that prevent

            the method from being applied if there have been any changes to the

            resource.
          example: '"5", "7da7a728-f910-11e6-942a-68f728c1ba70"'
          in: header
          name: If-Match
          required: false
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Person"
          links:
            GetUserByUserId:
              operationId: getUser
              parameters:
                userId: $response.body#/id
              description: >
                The `id` value returned in the response can be used as the
                `userId` parameter in `GET /users/{userId}`.
        4XX:
          description: Client Error
          content:
            application/problem+json:
              schema:
                properties:
                  detail:
                    description: >
                      A human readable explanation specific to this occurrence
                      of the

                      problem. You MUST NOT expose internal informations, personal

                      data or implementation details through this field.
                    example: Request took too long to complete.
                    type: string
                  instance:
                    description: >
                      An absolute URI that identifies the specific occurrence of
                      the problem.

                      It may or may not yield further information if dereferenced.
                    format: uri
                    type: string
                  status:
                    description: >
                      The HTTP status code generated by the origin server for
                      this occurrence

                      of the problem.
                    example: 503
                    exclusiveMaximum: true
                    format: int32
                    maximum: 600
                    minimum: 100
                    type: integer
                  title:
                    description: >
                      A short, summary of the problem type. Written in english
                      and readable

                      for engineers (usually not suited for non technical stakeholders and

                      not localized); example: Service Unavailable
                    type: string
                  type:
                    default: about:blank
                    description: >
                      An absolute URI that identifies the problem type.  When
                      dereferenced,

                      it SHOULD provide human-readable documentation for the problem type

                      (e.g., using HTML).
                    example: https://tools.ietf.org/html/rfc7231#section-6.6.4
                    format: uri
                    type: string
                type: object
        5XX:
          description: Server Error
          content:
            application/problem+json:
              schema:
                properties:
                  detail:
                    description: >
                      A human readable explanation specific to this occurrence
                      of the

                      problem. You MUST NOT expose internal informations, personal

                      data or implementation details through this field.
                    example: Request took too long to complete.
                    type: string
                  instance:
                    description: >
                      An absolute URI that identifies the specific occurrence of
                      the problem.

                      It may or may not yield further information if dereferenced.
                    format: uri
                    type: string
                  status:
                    description: >
                      The HTTP status code generated by the origin server for
                      this occurrence

                      of the problem.
                    example: 503
                    exclusiveMaximum: true
                    format: int32
                    maximum: 600
                    minimum: 100
                    type: integer
                  title:
                    description: >
                      A short, summary of the problem type. Written in english
                      and readable

                      for engineers (usually not suited for non technical stakeholders and

                      not localized); example: Service Unavailable
                    type: string
                  type:
                    default: about:blank
                    description: >
                      An absolute URI that identifies the problem type.  When
                      dereferenced,

                      it SHOULD provide human-readable documentation for the problem type

                      (e.g., using HTML).
                    example: https://tools.ietf.org/html/rfc7231#section-6.6.4
                    format: uri
                    type: string
                type: object
        default:
          content:
            application/problem+json:
              schema:
                properties:
                  detail:
                    description: >
                      A human readable explanation specific to this occurrence
                      of the

                      problem. You MUST NOT expose internal informations, personal

                      data or implementation details through this field.
                    example: Request took too long to complete.
                    type: string
                  instance:
                    description: >
                      An absolute URI that identifies the specific occurrence of
                      the problem.

                      It may or may not yield further information if dereferenced.
                    format: uri
                    type: string
                  status:
                    description: >
                      The HTTP status code generated by the origin server for
                      this occurrence

                      of the problem.
                    example: 503
                    exclusiveMaximum: true
                    format: int32
                    maximum: 600
                    minimum: 100
                    type: integer
                  title:
                    description: >
                      A short, summary of the problem type. Written in english
                      and readable

                      for engineers (usually not suited for non technical stakeholders and

                      not localized); example: Service Unavailable
                    type: string
                  type:
                    default: about:blank
                    description: >
                      An absolute URI that identifies the problem type.  When
                      dereferenced,

                      it SHOULD provide human-readable documentation for the problem type

                      (e.g., using HTML).
                    example: https://tools.ietf.org/html/rfc7231#section-6.6.4
                    format: uri
                    type: string
                type: object
          description: Unexpected error
components:
  schemas:
    Health:
      properties:
        message:
          type: object
          properties:
            id:
              type: string
    Person:
      externalDocs:
        url: https://w3id.org/italia/onto/CPV
      properties:
        family_name:
          type: string
        given_name:
          type: string
        tax_code:
          description: Il codice fiscale.
          example: RSSMRA75L01H501A
          externalDocs:
            url: https://w3id.org/italia/onto/CPV/taxCode
          pattern: /^(?:(?:[B-DF-HJ-NP-TV-Z]|[AEIOU])[AEIOU][AEIOUX]|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}[\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[1256LMRS][\dLMNP-V])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM])(?:[A-MZ][1-9MNP-V][\dLMNP-V]{2}|[A-M][0L](?:[1-9MNP-V][\dLMNP-V]|[0L][1-9MNP-V]))[A-Z]$/i
          type: string
